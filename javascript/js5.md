### Javascript 面试题 - 作用域与闭包

##### 概念一、作用域

> Javascript 中的作用域指的是变量的作用域，变量可以在当前的作用域内被使用，变量作用域包括三种：

1. 全局作用域；
2. 函数作用域；
3. 块级作用域；

##### 概念二、自由变量

> 一个变量在当前作用域内没有被定义，但被使用了，该变量被称为自由变量；

特点是：

1. 从当前作用域沿着作用域链一级一级向上寻找该变量，直到找到为止，如果直到全局作用域也没有找到，则会产生引用错误。

##### 概念三、闭包

> 闭包：一个函数和对其周围状态（词法环境）的引用捆绑在一起，这样的组合就是闭包。也就是说，闭包可以让你在一个内层函数中访问到其外层函数的作用域。在 JavaScript 中，每当创建一个函数，闭包就会在函数创建的同时被创建出来。

概念解析：

1. 闭包 = 函数 + 函数的词法环境的引用；
2. 函数在被创建（定义）的时候，它的词法环境已经确定，即函数一旦被创建，函数就产生了闭包；
3. 闭包具有一个特性，函数可以访问到它的外层函数的作用域，也就是说可以访问外层函数中的属性和方法；需要注意的是，函数在创建的时候它的词法环境就已经确定，所以它可以访问的外层作用域的也已经确定，和函数如何被调用没有关系（注意和 this 进行区分）。

##### 一、this 在不同的应用场景，如何取值？

1. 作用普通函数
2. 使用 call、apply、bind 改变 this 的指向
3. 作用对象方法被调用
4. 在 class 方法中调用
5. 箭头函数

关键点：this 的指向在函数被调用的时候才被确定，而不是被定义的时候确定。

##### 二、手写 bind 函数

> bind：bind()方法创建一个新的函数，在 bind()被调用的时候，这个新函数的 this 被指定为 bind()的第一个参数，其余参数作为新函数的参数供调用时使用。

`个人解析：bind()方法接收1至n个参数，其中第一个参数被设置为bind()方法调用后返回的新函数的this，其余的参数（如果有）则被设置为新函数的参数。`

> call: call()方法与 bind()方法类似，不同的是 call 返回的是函数的调用结果，而 bind()返回的是函数。

> apply: apply()方法与 call()方法类似，都可以改变函数 this 的指向并设置参数，返回结果都是函数运行后的返回值，不同的是 apply 接收的参数只有 2 个，一个是 this 指向的对象，第二个是一个参数列表，这个参数列表将作为函数的参数。

##### 三、实际开发中闭包的应用场景，举例说明

1. 利用闭包实现数据私有化，数据缓存；
